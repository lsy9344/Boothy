# Story 4.3: Hardware Compatibility Matrix + Regression Campaign (Epic 4)

## Status

Ready for Review

## Story

**As a** release/QA owner,  
**I want** a structured hardware compatibility matrix and a repeatable regression test campaign for Epic 4 (real camera integration),  
**so that** we can deploy to store PCs with evidence-based confidence and avoid field regressions (offline/kiosk-safe).

[Source: docs/stories/epic-4-real-camera-hardware-integration.md#story-sequence-dependency-ordered]  
[Source: docs/architecture/testing-strategy.md#regression-testing]

## Context / Problem

Epic 4 introduces real Canon camera tethering via a headless sidecar and adds a large set of failure-mode requirements (disconnect, missing SDK/driver, transfer failures) while preserving offline and existing RapidRAW-derived editing/export behavior. Field variability (camera models/firmware, driver/SDK prerequisites, x86 EDSDK bitness) makes it easy to ship a build that "works on one dev PC" but fails in a store environment.

This story defines the minimum documentation artifacts needed to run a repeatable regression campaign and to record "what combinations are known-good" with concrete evidence (logs, correlation IDs, session folders, screenshots).

[Source: docs/prd/requirements.md#functional]  
[Source: docs/prd/technical-constraints-and-integration-requirements.md#licensing--distribution-gate-mvp]  
[Source: docs/decisions/adr-003-canon-edsdk-bundling.md#implementation-notes]

## Acceptance Criteria

1. A hardware compatibility matrix document exists under `docs/qa/assessments/` that defines:
   - Test dimensions (camera model/firmware, Windows version, connection topology, sidecar mode, driver/EDSDK/runtime bitness, Boothy/Sidecar build identifiers)
   - Test phases and pass/fail status columns for Epic 4 core flow + failure/recovery
   - Evidence requirements (log paths, correlation IDs, session root, screenshots/video)
   [Source: docs/architecture/testing-strategy.md#manual-testing-requirements-mvp-gate]
   [Source: docs/qa/README.md#structure]

2. The matrix includes at least 1 fully-filled example row (can be a lab/dev configuration) to prove the template is usable end-to-end.

3. A regression campaign document exists under `docs/qa/assessments/` that defines a repeatable MVP gate checklist including, at minimum:
   - Offline/no-account policy verification for core flow
   - Existing-feature verification (browse/edit/export of pre-existing session photos) remains functional even when camera is disconnected/unavailable
   - Epic 4 core flow validation (capture -> transfer-complete -> stabilization -> ingest -> preset snapshot apply -> export)
   - Failure/recovery scenarios (disconnect during transfer, missing/mismatched SDK/driver, low disk space)
   [Source: docs/architecture/testing-strategy.md#manual-testing-requirements-mvp-gate]
   [Source: docs/prd/requirements.md#offline--no-account-policy-mvp]

4. The regression campaign document includes a short requirements-to-tests mapping for the Epic 4 critical requirements (FR5/FR6/FR20/FR21/FR23/FR24/FR25/FR27 and NFR7/NFR8), with links to where evidence will be captured. Each mapped requirement entry includes a 1-line requirement statement (quote or concise summary) to reduce ambiguity.
   [Source: docs/prd/requirements.md#functional]
   [Source: docs/prd/requirements.md#non-functional]

## Tasks / Subtasks

- [x] Task 1: Define and publish the hardware compatibility matrix template (AC: 1, 2)
  - [x] Create `docs/qa/assessments/4.3-hardware-compatibility-matrix-20260124.md` with clear column definitions and instructions for filling in evidence.
    [Source: docs/qa/README.md#structure]
  - [x] Include camera runtime/bitness fields aligned to the EDSDK bundling decision (x86 sidecar/EDSDK for MVP unless updated).
    [Source: docs/decisions/adr-003-canon-edsdk-bundling.md#implementation-notes]
    [Source: docs/compliance/canon-edsdk-entitlement.md#technical-details-for-repeatable-packaging]
  - [x] Add at least one filled example configuration row (use "TBD" only for unknown values; phases/results should be filled for the example).
    [Source: docs/architecture/testing-strategy.md#regression-testing]

- [x] Task 2: Define and publish the regression campaign (MVP gate) checklist (AC: 3, 4)
  - [x] Create `docs/qa/assessments/4.3-regression-campaign-20260124.md` with step-by-step scenarios and expected results, structured for repeatable execution.
    [Source: docs/architecture/testing-strategy.md#manual-testing-requirements-mvp-gate]
  - [x] Include "existing feature verification" scenarios (camera disconnected/unavailable but browse/edit/export works).
    [Source: docs/architecture/testing-strategy.md#regression-testing]
    [Source: docs/prd/requirements.md#functional]
  - [x] Include a short requirements-to-tests mapping section for Epic 4 critical requirements + NFRs, and link each mapping to an evidence field (logs/screenshots/session paths).
    - Include a 1-line requirement statement (quote or concise summary) next to each FR/NFR ID to prevent misinterpretation.
    [Source: docs/prd/requirements.md#functional]
    [Source: docs/prd/requirements.md#non-functional]

- [x] Task 3: Align artifacts with repo conventions (AC: 1, 3)
  - [x] Ensure all new artifacts live under `docs/qa/assessments/` and use the existing naming conventions. If the artifact creation date differs, update the `YYYYMMDD` suffix accordingly.
    [Source: docs/qa/README.md#structure]
  - [x] Ensure documents explicitly call out required evidence locations (Boothy logs, Sidecar logs, session root) and correlationId capture expectations.
    [Source: docs/prd/technical-constraints-and-integration-requirements.md#monitoring-and-logging]
    [Source: docs/architecture/testing-strategy.md#manual-testing-requirements-mvp-gate]

## Dev Notes

### Dependencies / Sequencing

- This story is part of Epic 4 and assumes the real camera integration flow exists (or is in progress). The campaign docs can be drafted in parallel, but execution/evidence requires a build that includes the Epic 4 camera sidecar integration.
  [Source: docs/stories/epic-4-real-camera-hardware-integration.md#goal]
  [Source: docs/architecture/testing-strategy.md#integration-tests]
- Dependency: Story 4.1 (Real Camera Capture + transfer-complete pipeline) should exist/ship before treating this campaign as a release gate; this story is the structured evidence layer that sits on top of that functionality.
  [Source: docs/stories/epic-4-real-camera-hardware-integration.md#story-sequence-dependency-ordered]
  [Source: docs/prd.md#epic-4-real-camera-hardware-integration--field-validation]

### QA Artifact Locations

- QA artifacts live under `docs/qa/`:
  - Assessments: `docs/qa/assessments/`
  - Gates: `docs/qa/gates/` (created by QA review later, not required as part of this story draft)
  [Source: docs/qa/README.md#structure]

### Camera Runtime / Bitness Constraints (MVP)

- Canon EDSDK bundling is internal-only and the MVP EDSDK DLL set in the reference stack is x86; this implies the camera sidecar must target x86 for MVP (still runs on Windows 11 x64).
  [Source: docs/decisions/adr-003-canon-edsdk-bundling.md#implementation-notes]
  [Source: docs/compliance/canon-edsdk-entitlement.md#technical-details-for-repeatable-packaging]

### Evidence Capture (minimum)

- Logs live under `%APPDATA%\\Boothy\\logs\\...` and must allow correlationId-based tracing for capture -> transfer -> ingest -> preset -> export.
  [Source: docs/prd/technical-constraints-and-integration-requirements.md#monitoring-and-logging]
- Session root defaults to `%USERPROFILE%\\Pictures\\dabi_shoot\\<session>` and evidence should reference the exact session used.
  [Source: docs/qa/assessments/4.1-field-validation-20260124.md#evidence-links--paths]

### Testing Requirements

- Use the MVP gate manual checklist as the baseline for the regression campaign; prioritize evidence collection over exhaustive automation early.
  [Source: docs/architecture/testing-strategy.md#manual-testing-requirements-mvp-gate]
  [Source: docs/architecture/testing-strategy.md#regression-testing]

## Integration Verification

IV1: Offline/no-account policy remains true while running the campaign (network blocked/offline); no network dependencies required for core capture/edit/export workflow.  
IV2: With camera disconnected or prerequisites missing, browsing/editing/exporting existing session photos remains functional (capture-only disabled) and customer-facing messaging stays Korean-only and non-technical.  
IV3: The campaign produces evidence artifacts (logs/correlation IDs/session paths/screenshots) sufficient to debug field failures without reproducing locally.

[Source: docs/prd/requirements.md#offline--no-account-policy-mvp]  
[Source: docs/prd/requirements.md#functional]  
[Source: docs/prd/technical-constraints-and-integration-requirements.md#monitoring-and-logging]

## Testing

- This story produces QA documentation artifacts; validation is peer review of the templates plus (optionally) a dry-run execution of the checklist on one known configuration to ensure all fields can be populated.
  [Source: docs/architecture/testing-strategy.md#regression-testing]

## Change Log

| Date | Version | Description | Author |
| --- | --- | --- | --- |
| 2026-01-24 | 0.1 | Initial draft created from Epic 4 + testing strategy + QA artifact conventions | Scrum Master (Bob) |
| 2026-01-24 | 0.2 | Clarified requirements-to-tests mapping expectations, added filename date guidance, and normalized arrows to ASCII for encoding safety | Product Owner (Sarah) |
| 2026-01-24 | 0.3 | Added QA assessment artifacts for hardware matrix and regression campaign | Dev (James) |

## Dev Agent Record

### Agent Model Used

GPT-5.2 (Codex CLI)

### Debug Log References

N/A

### Completion Notes List

- [x] 하드웨어 호환 매트릭스 템플릿과 예시 행을 추가함.
- [x] 회귀 캠페인 체크리스트와 요구사항-테스트 매핑을 추가함.
- [x] 산출물 생성 및 증거 필드 포함 여부를 확인함(Test-Path, rg).

### File List

#### New Files Created

- [x] docs/qa/assessments/4.3-hardware-compatibility-matrix-20260124.md
- [x] docs/qa/assessments/4.3-regression-campaign-20260124.md

#### Modified Files

- [x] docs/stories/4.3.hardware-compatibility-matrix-regression-campaign.md

## QA Results

TBD

### Review Date: 2026-01-24

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment

문서 산출물이 명확하고 재현 가능한 실행 기준을 제공하며, AC 1~4를 충족합니다. 다만 QA 표준 참조 문서 경로(요구된 경로)가 저장소에 없어서 대체 문서를 기준으로 확인했습니다.

### Refactoring Performed

없음 (문서 검토만 수행)

### Compliance Check

- Coding Standards: CONCERNS (요구 경로 `docs/coding-standards.md` 없음 → `docs/architecture/coding-standards.md` 기준 확인)
- Project Structure: CONCERNS (요구 경로 `docs/unified-project-structure.md` 없음 → `docs/architecture/source-tree.md` 기준 확인)
- Testing Strategy: CONCERNS (요구 경로 `docs/testing-strategy.md` 없음 → `docs/architecture/testing-strategy.md` 기준 확인)
- All ACs Met: PASS (AC 1~4 충족)

### Improvements Checklist

- [ ] 스토리 상태를 "Review"로 전환 후 QA 게이트 재확인
- [ ] 회귀 캠페인 결과 요약에 “Matrix Row ID” 필드 추가(호환성 매트릭스 행과 1:1 추적)
- [ ] 증거 폴더 네이밍 규칙(예: `evidence/qa/4.3/<ROW-ID>/`)을 명시해 표준화

### Security Review

문서 산출물이며 보안 리스크는 없음. 오프라인 정책/로그 증거 확보 요구가 포함되어 있어 적절합니다.

### Performance Considerations

문서 산출물로 성능 영향 없음.

### Files Modified During Review

- `docs/qa/gates/4.3-hardware-compatibility-matrix-regression-campaign-epic-4.yml`

### Gate Status

Gate: CONCERNS → `docs/qa/gates/4.3-hardware-compatibility-matrix-regression-campaign-epic-4.yml`  
Risk profile: (미생성) `docs/qa/assessments/4.3-risk-20260124.md`  
NFR assessment: (미생성) `docs/qa/assessments/4.3-nfr-20260124.md`

### Recommended Status

⏳ Changes Required - See unchecked items above  
(Story owner decides final status)
