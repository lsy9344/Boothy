# 4.3 Regression Campaign (MVP Gate) - Epic 4

- Story: `docs/stories/4.3.hardware-compatibility-matrix-regression-campaign.md`
- Date: 2026-01-24
- Owner: QA / Release
- Build:
  - Boothy version/commit: TBD
  - Sidecar version/commit: TBD
  - Sidecar mode: `real` (primary), `mock` (negative control)

## Preconditions

- Network OFF / blocked (offline policy validation).
- Canon EDSDK runtime present and x86 sidecar build for MVP.
- Known-good camera + USB cable available.
- Session root available: `%USERPROFILE%\\Pictures\\dabi_shoot\\<session>`.

## Evidence Capture (Required)

- Boothy logs: `%APPDATA%\\Boothy\\logs\\...` (filename + path)
- Sidecar logs: `%APPDATA%\\Boothy\\logs\\...` (filename + path)
- CorrelationId(s) for capture -> transfer -> ingest -> preset -> export
- Session root path used
- Screenshots / video paths

## Campaign Checklist (Step-by-Step)

### A. Preflight

- [ ] A1. Launch Boothy with network OFF
  - Expected: app launches; no network dependency errors
  - Evidence: screenshot + Boothy log path
- [ ] A2. Camera connection state UI shows connected / disconnected / error states
  - Expected: state changes without crash; customer messages are Korean-only
  - Evidence: screenshots + correlationId if error

### B. Offline / No-Account Policy

- [ ] B1. Capture -> export workflow completes with network OFF
  - Expected: no account prompts; export succeeds offline
  - Evidence: logs + export output path

### C. Existing Feature Verification (Camera Unavailable)

- [ ] C1. Disconnect camera or remove SDK/driver prerequisites
  - Expected: capture disabled only; browsing/edit/export of existing sessions still works
  - Evidence: screenshots + logs
- [ ] C2. Browse/edit/export pre-existing session photos
  - Expected: edit/export succeeds; no crash
  - Evidence: export output path + logs

### D. Epic 4 Core Flow (Real Camera)

- [ ] D1. Create session -> capture 3 photos (UI button)
  - Expected: files appear in `Raw/` only after transfer-complete
  - Evidence: file list + timestamps + correlationId
- [ ] D2. Stabilization -> ingest -> newest auto-selected
  - Expected: no partial import; newest appears in center view
  - Evidence: logs + screenshot
- [ ] D3. Preset snapshot apply (new-only)
  - Expected: preset applies to new captures only; no retroactive apply
  - Evidence: logs + UI screenshot
- [ ] D4. Export (offline)
  - Expected: export succeeds; output exists
  - Evidence: output path + logs

### E. Failure / Recovery

- [ ] E1. Disconnect during transfer
  - Expected: no crash; customer-safe Korean message; admin diagnostics include correlationId
  - Evidence: logs + screenshot
- [ ] E2. Missing/mismatched SDK or driver (real mode)
  - Expected: capture unavailable; browse/edit/export still works
  - Evidence: logs + screenshot
- [ ] E3. Low disk space / disk full
  - Expected: safe block + message; no corrupted import
  - Evidence: logs + disk state screenshot

## Requirements-to-Tests Mapping (Epic 4 Critical)

| ID | 1-Line Requirement Statement | Campaign Step(s) | Evidence Field |
| --- | --- | --- | --- |
| FR5 | UI capture + external shutter capture supported | D1 (UI) + optional external shutter run | Logs + correlationId + session files |
| FR6 | Captured files saved to session and auto-imported after transfer completes | D1, D2 | Session `Raw/` timestamps + logs |
| FR20 | Camera errors surfaced without crash; browsing/export still works | C1, E1, E2 | Logs + screenshots |
| FR21 | Canon camera support uses reference implementation (no re-implement) | A2 (preflight reference for Canon), D steps on Canon | Build notes + test environment details |
| FR23 | Real mode missing prerequisites -> app still usable; customer-safe Korean message + admin diagnostics | C1, E2 | Screenshots + logs |
| FR24 | Sidecar emits transfer-complete only after file fully written | D1 | `Raw/` file timestamps + logs |
| FR25 | Stabilization checks before ingest to prevent corrupted imports | D2 | Logs + ingest timing evidence |
| FR27 | Correlatable logs across capture/transfer/ingest/preset/export | D1-D4, E1 | CorrelationId(s) in logs |
| NFR7 | Fully offline operation for core capture/edit/export | A1, B1, D4 | Logs + offline proof |
| NFR8 | Logs/diagnostics sufficient for field debugging | All steps | Log paths + correlationId(s) |

## Result Summary

- Overall: PASS / CONCERNS / FAIL
- Summary notes:
  - 
